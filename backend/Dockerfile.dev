# Copyright (c) 2025 kk
#
# This software is released under the MIT License.
# https://opensource.org/licenses/MIT

FROM golang:1.24-alpine

# Install air for hot reload and other tools
# Use version compatible with Go 1.24 (v1.62.0 supports Go 1.24)
# Also install swag for Swagger documentation generation
RUN go install github.com/air-verse/air@v1.62.0 && \
    go install github.com/swaggo/swag/cmd/swag@latest && \
    apk add --no-cache git make

WORKDIR /app

# Copy go mod files
COPY go.mod go.sum ./
RUN go mod download

# Copy source code
COPY . .

# Expose port
EXPOSE 8080

# Default command (will be overridden by docker-compose)
CMD ["go", "run", "cmd/main.go"]

